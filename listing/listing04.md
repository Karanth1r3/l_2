Что выведет программа? Объяснить вывод программы.

package main

func main() {
  ch := make(chan int)
  go func() {
    for i := 0; i < 10; i++ {
      ch <- i
    }
  }()

  for n := range ch {
    println(n)
  }
}
Ответ:

...
range по каналу читает из него, пока канал не закрыт. После завершения горутины в канал никто более не ведёт запись в канал, но range всё еще пытается читать с него, поэтому выведутся значения с 0 по 9, а затем произойдет deadlock (главная горутина ожидает чтения из канала, но больше нет горутин, которые в него записывают данные). Один из способов исправить это - закрыть в горутине канал через defer